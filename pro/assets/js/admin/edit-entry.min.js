"use strict";var WPFormsEditEntry=window.WPFormsEditEntry||function(t,o){var f={$editForm:o("#wpforms-edit-entry-form"),$submitButton:o("#wpforms-edit-entry-update")},e={},i={init:function(){o(i.ready)},ready:function(){e.nonce=f.$editForm.find('input[name="nonce"]').val(),e.entryId=f.$editForm.find('input[name="wpforms[entry_id]"]').val(),i.initSavedFormData(),i.events()},events:function(){f.$submitButton.on("click",i.clickUpdateButton),f.$editForm.on("wpformsAjaxSubmitFailed",i.submitFailed).on("wpformsAjaxSubmitSuccess",i.submitSuccess),o(t).on("beforeunload",i.beforeUnload)},initSavedFormData:function(){e.savedFormData=f.$editForm.serialize()},beforeUnload:function(r){if(f.$editForm.serialize()!==e.savedFormData)return r.returnValue="Leave site?",r.returnValue},clickUpdateButton:function(r){r.preventDefault(),f.$submitButton.prop("disabled",!0),i.preSubmitActions(),i.hideErrors(),wpforms.formSubmitAjax(f.$editForm)},preSubmitActions:function(){o(".wpforms-smart-phone-field").trigger("input")},submitFailed:function(r,e){i.displayErrors(e),o.alert({title:wpforms_admin.heads_up,content:e.data.errors.general,icon:"fa fa-info-circle",type:"orange",buttons:{confirm:{text:wpforms_admin_edit_entry.strings.continue_editing,btnClass:"btn-confirm",keys:["enter"]},cancel:{text:wpforms_admin_edit_entry.strings.view_entry,action:function(){t.location.href=wpforms_admin_edit_entry.strings.view_entry_url}}}})},submitSuccess:function(r,e){i.initSavedFormData(),void 0!==e.data&&(o("#wpforms-entry-details .wpforms-entry-modified .date-time").text(e.data.modified),o.alert({title:wpforms_admin_edit_entry.strings.success,content:wpforms_admin_edit_entry.strings.msg_saved,icon:"fa fa-info-circle",type:"green",buttons:{confirm:{text:wpforms_admin_edit_entry.strings.continue_editing,btnClass:"btn-confirm",keys:["enter"]},cancel:{text:wpforms_admin_edit_entry.strings.view_entry,action:function(){t.location.href=wpforms_admin_edit_entry.strings.view_entry_url}}}}))},hideErrors:function(){f.$editForm.find(".wpforms-field.wpforms-has-error").removeClass("wpforms-has-error"),f.$editForm.find(".wpforms-error:not(label)").removeClass("wpforms-error"),f.$editForm.find("label.wpforms-error").addClass("wpforms-hidden")},displayErrors:function(r){var e=r.data&&"errors"in r.data?r.data.errors:null;wpf.empty(e)||wpf.empty(e.field)||(e=e.field,Object.keys(e).forEach(function(r){i.displayFieldError(r,e[r]),i.displaySubfieldsErrors(r,e[r])}))},displayFieldError:function(r,e){var t,i,n;"string"!=typeof e||wpf.empty(r)&&"0"!==r||wpf.empty(e)||(i=(t="wpforms-"+f.$editForm.data("formid")+"-field_"+r)+"-error",n=f.$editForm.find("#"+t+"-container"),r=f.$editForm.find("#"+i),n.addClass("wpforms-has-error"),o("#"+t).addClass("wpforms-error"),0<r.length?r.html(e).removeClass("wpforms-hidden"):n.append('<label id="'+i+'" class="wpforms-error">'+e+"</label>"))},displaySubfieldsErrors:function(o,s){var a,r,d;"object"!=typeof s||wpf.empty(s)||wpf.empty(o)||(r="wpforms-"+(a=f.$editForm.data("formid"))+"-field_"+o,d=f.$editForm.find("#"+r+"-container"),Object.keys(s).forEach(function(r){var e=s[r];if("string"==typeof e&&""!==e){var t="wpforms[fields]["+o+"]["+r+"]",i="wpforms-"+a+"-field_"+o+"-"+r+"-error",n=f.$editForm.find("#"+i);if(d.hasClass("wpforms-has-error")||d.addClass("wpforms-has-error"),0<n.length)return d.find('[name="'+t+'"]').addClass("wpforms-error"),void n.html(e).removeClass("wpforms-hidden");e='<label id="'+i+'" class="wpforms-error">'+e+"</label>";(d.hasClass("wpforms-field-likert_scale")?d.find("tr").eq(r.replace(/r/,"")):d.find('[name="'+t+'"]').addClass("wpforms-error")).after(e)}}))}};return i}((document,window),jQuery);WPFormsEditEntry.init();