"use strict";var WPFormsBuilderEducation=window.WPFormsBuilderEducation||function(e,o,i){var c={init:function(){i(c.ready)},ready:function(){c.events()},events:function(){c.clickEvents()},clickEvents:function(){i(e).on("click",".wpforms-add-fields-button, .wpforms-panel-sidebar-section, .wpforms-builder-settings-block-add",function(e){var t=i(this);if(t.hasClass("education-modal"))switch(e.preventDefault(),e.stopImmediatePropagation(),t.data("action")){case"activate":c.activateModal(t.data("name"),t.data("path"),t.data("nonce"));break;case"install":c.installModal(t.data("name"),t.data("url"),t.data("nonce"),t.data("license"));break;case"upgrade":c.upgradeModal(t.data("name"),t.data("field-name"),t.data("license"));break;case"license":c.licenseModal()}})},activateModal:function(e,t,n){i.alert({title:!1,content:wpforms_builder.education_activate_prompt.replace(/%name%/g,e),icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_builder.education_activate_confirm,btnClass:"btn-confirm",keys:["enter"],action:function(){return this.$body.find(".btn-confirm").prop("disabled",!0).html('<i class="fa fa-circle-o-notch fa-spin fa-fw"></i> '+wpforms_builder.education_activating),c.activateAddon(t,n,this),!1}},cancel:{text:wpforms_builder.cancel}}})},activateAddon:function(e,t,n){i.post(wpforms_builder.ajax_url,{action:"wpforms_activate_addon",nonce:t,plugin:e},function(e){n.close(),e.success?c.saveModal():i.alert({title:!1,content:e.data,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}})})},saveModal:function(e){e=e||wpforms_builder.education_activated,i.alert({title:e.replace(/\.$/,""),content:wpforms_builder.education_save_prompt,icon:"fa fa-check-circle",type:"green",buttons:{confirm:{text:wpforms_builder.education_save_confirm,btnClass:"btn-confirm",keys:["enter"],action:function(){return this.$body.find(".btn-confirm").prop("disabled",!0).html('<i class="fa fa-circle-o-notch fa-spin fa-fw"></i> '+wpforms_builder.saving),WPFormsBuilder.formIsSaved()&&location.reload(!0),WPFormsBuilder.formSave().done(function(){location.reload(!0)}),!1}},cancel:{text:wpforms_builder.close}}})},installModal:function(e,t,n,a){t&&""!==t?i.alert({title:!1,content:wpforms_builder.education_install_prompt.replace(/%name%/g,e),icon:"fa fa-info-circle",type:"blue",boxWidth:"425px",buttons:{confirm:{text:wpforms_builder.education_install_confirm,btnClass:"btn-confirm",keys:["enter"],isHidden:!wpforms_builder.can_install_addons,action:function(){return this.$body.find(".btn-confirm").prop("disabled",!0).html('<i class="fa fa-circle-o-notch fa-spin fa-fw"></i> '+wpforms_builder.education_installing),c.installAddon(t,n,this),!1}},cancel:{text:wpforms_builder.cancel}}}):c.upgradeModal(e,"",a)},installAddon:function(e,t,n){i.post(wpforms_builder.ajax_url,{action:"wpforms_install_addon",nonce:t,plugin:e},function(e){if(n.close(),e.success)c.saveModal(e.data.msg);else{var t=e.data;"object"==typeof e.data&&(t=wpforms_builder.addon_error),i.alert({title:!1,content:t,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}})}})},upgradeModal:function(e,t,n){if(void 0!==n&&0!==n.length||(n="pro"),!(i.inArray(n,["pro","elite"])<0)){var a=e+" "+wpforms_builder.education_upgrade[n].title;void 0!==t&&0<t.length&&(a=t+" "+wpforms_builder.education_upgrade[n].title),i.alert({title:a,icon:"fa fa-lock",content:wpforms_builder.education_upgrade[n].message.replace(/%name%/g,e),boxWidth:"550px",onOpenBefore:function(){this.$body.find(".jconfirm-content").addClass("lite-upgrade")},buttons:{confirm:{text:wpforms_builder.education_upgrade[n].confirm,btnClass:"btn-confirm",keys:["enter"],action:function(){o.open(wpforms_builder.education_upgrade[n].url+"&utm_content="+encodeURIComponent(e.trim()),"_blank")}}}})}},licenseModal:function(){i.alert({title:!1,content:wpforms_builder.education_license_prompt,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}})}};return c}(document,window,jQuery);WPFormsBuilderEducation.init();