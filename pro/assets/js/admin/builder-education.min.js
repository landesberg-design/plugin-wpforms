"use strict";var WPFormsBuilderEducation=window.WPFormsBuilderEducation||function(e,t,a){var i={init:function(){a(i.ready)},ready:function(){i.events()},events:function(){i.clickEvents()},clickEvents:function(){a(e).on("click",".wpforms-add-fields-button, .wpforms-panel-sidebar-section, .wpforms-builder-settings-block-add, .wpforms-field-option-row",function(e){var t=a(this);if(t.hasClass("education-modal"))switch(e.preventDefault(),e.stopImmediatePropagation(),t.data("action")){case"activate":i.activateModal({feature:t.data("name"),path:t.data("path"),nonce:t.data("nonce")});break;case"install":i.installModal({feature:t.data("name"),url:t.data("url"),nonce:t.data("nonce"),license:t.data("license")});break;case"upgrade":i.upgradeModal({feature:t.data("name"),message:t.data("message"),fieldName:t.data("field-name"),license:t.data("license")});break;case"license":i.licenseModal()}})},activateModal:function(e){a.alert({title:!1,content:wpforms_builder.education_activate_prompt.replace(/%name%/g,e.feature),icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_builder.education_activate_confirm,btnClass:"btn-confirm",keys:["enter"],action:function(){return this.$body.find(".btn-confirm").prop("disabled",!0).html('<i class="fa fa-circle-o-notch fa-spin fa-fw"></i> '+wpforms_builder.education_activating),i.activateAddon(e.path,e.nonce,this),!1}},cancel:{text:wpforms_builder.cancel}}})},activateAddon:function(e,t,n){a.post(wpforms_builder.ajax_url,{action:"wpforms_activate_addon",nonce:t,plugin:e},function(e){n.close(),e.success?i.saveModal():a.alert({title:!1,content:e.data,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}})})},saveModal:function(e){e=e||wpforms_builder.education_activated,a.alert({title:e.replace(/\.$/,""),content:wpforms_builder.education_save_prompt,icon:"fa fa-check-circle",type:"green",buttons:{confirm:{text:wpforms_builder.education_save_confirm,btnClass:"btn-confirm",keys:["enter"],action:function(){return this.$body.find(".btn-confirm").prop("disabled",!0).html('<i class="fa fa-circle-o-notch fa-spin fa-fw"></i> '+wpforms_builder.saving),WPFormsBuilder.formIsSaved()&&location.reload(!0),WPFormsBuilder.formSave().done(function(){location.reload(!0)}),!1}},cancel:{text:wpforms_builder.close}}})},installModal:function(e){e.url&&""!==e.url?a.alert({title:!1,content:wpforms_builder.education_install_prompt.replace(/%name%/g,e.feature),icon:"fa fa-info-circle",type:"blue",boxWidth:"425px",buttons:{confirm:{text:wpforms_builder.education_install_confirm,btnClass:"btn-confirm",keys:["enter"],isHidden:!wpforms_builder.can_install_addons,action:function(){return this.$body.find(".btn-confirm").prop("disabled",!0).html('<i class="fa fa-circle-o-notch fa-spin fa-fw"></i> '+wpforms_builder.education_installing),i.installAddon(e.url,e.nonce,this),!1}},cancel:{text:wpforms_builder.cancel}}}):i.upgradeModal({feature:e.feature,license:e.license})},installAddon:function(e,t,n){a.post(wpforms_builder.ajax_url,{action:"wpforms_install_addon",nonce:t,plugin:e},function(e){var t;n.close(),e.success?i.saveModal(e.data.msg):(t=e.data,"object"==typeof e.data&&(t=wpforms_builder.addon_error),a.alert({title:!1,content:t,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}}))})},upgradeModal:function(e){void 0!==e.license&&0!==e.license.length||(e.license="pro"),a.inArray(e.license,["pro","elite"])<0||a.alert({title:i.getModalTitle(e),icon:"fa fa-lock",content:e.message&&e.message.length?e.message:wpforms_builder.education_upgrade[e.license].message.replace(/%name%/g,e.feature),boxWidth:"550px",onOpenBefore:function(){this.$body.find(".jconfirm-content").addClass("lite-upgrade")},buttons:{confirm:{text:wpforms_builder.education_upgrade[e.license].confirm,btnClass:"btn-confirm",keys:["enter"],action:function(){t.open(wpforms_builder.education_upgrade[e.license].url+"&utm_content="+encodeURIComponent(e.feature.trim()),"_blank")}}}})},getModalTitle:function(e){return void 0!==e.fieldName&&0<e.fieldName.length?e.fieldName+" "+wpforms_builder.education_upgrade[e.license].title:e.feature+" "+wpforms_builder.education_upgrade[e.license].title},licenseModal:function(){a.alert({title:!1,content:wpforms_builder.education_license_prompt,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}})}};return i}(document,window,jQuery);WPFormsBuilderEducation.init();